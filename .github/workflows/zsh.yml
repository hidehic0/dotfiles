name: Main Workflow
on:
  push:
  pull_request:
jobs:
  call-aqua: # 🔹 aqua.yml を呼び出すジョブ
    uses: hidehic0/dotfiles/.github/workflows/aqua.yml@main # ✅ jobs の直下で uses を使う
  zsh_install_test:
    needs: call-aqua # 🔹 Aqua のセットアップが終わってから実行
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install zsh
        run: |
          sudo apt-get update
          sudo apt-get install zsh
      - name: Copy zsh & sheldon config
        run: |
          cp -r ${{ github.workspace }}/zsh/ ~/.config/zsh/
          cp -r ${{ github.workspace }}/sheldon/ ~/.config/sheldon/
          ln -s ~/.config/zsh/zshrc ~/.zshrc
      - name: Install test
        run: zsh -i -c exit
