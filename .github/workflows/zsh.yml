name: Main Workflow
on:
  push:
  pull_request:
jobs:
  zsh_install_test:
    needs: call-aqua # 🔹 Aqua のセットアップが終わってから実行
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: aquaproj/aqua-installer@v3.1.1
        with:
          aqua_version: v2.45.0
        env:
          AQUA_CONFIG: aqua/aqua.yaml
      - name: Install zsh
        run: |
          sudo apt-get update
          sudo apt-get install zsh
      - name: Copy zsh & sheldon config
        run: |
          cp -r ${{ github.workspace }}/zsh/ ~/.config/zsh/
          cp -r ${{ github.workspace }}/sheldon/ ~/.config/sheldon/
          ln -s ~/.config/zsh/zshrc ~/.zshrc
      - name: Install test
        run: zsh -i -c exit
